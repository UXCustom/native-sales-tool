function getBrowserInfo(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===i[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),i.join(" "))}function videoResources(e,t){$.ajax({headers:{Accept:"application/json;pk="+policy_key},type:"GET",url:apiBaseURL+"/accounts/"+account_id+"/playlists/"+t,dataType:"json",crossDomain:!0,error:function(){"MSIE 9"==browserInfo&&$(".placeholder").remove()}}).done(function(t){function i(){v.catalog.getVideo(this.getAttribute("data-video-id"),function(e,t){v.catalog.load(t),v.play()}),$(this).addClass("vjs-selected"),$(".vjs-playlist-item").not(this).removeClass("vjs-selected")}function n(){function e(e){var t=(parseInt(e%1e3/100),parseInt(e/1e3%60)),i=parseInt(e/6e4%60),n=parseInt(e/36e5%24);return n=10>n?"0"+n:n,i=10>i?"0"+i:i,t=10>t?"0"+t:t,1>n?i+":"+t:n+":"+i+":"+t}for($("#videoModal").addClass("showModal"),$("body").addClass("noScroll"),j=0;r>j;j++){modalVideoItem=t.videos[j],h=document.createElement("li"),h.setAttribute("class","vjs-playlist-item"),h.setAttribute("data-video-id",modalVideoItem.id),m=document.createElement("picture"),m.setAttribute("class","vjs-playlist-thumbnail"),f=document.createElement("img"),f.src=modalVideoItem.poster;var n=modalVideoItem.duration,s=n.toString(),a=s.replace(/\./g,""),o=parseInt(a,10);x=document.createElement("time"),x.setAttribute("class","vjs-playlist-duration"),x.appendChild(document.createTextNode(e(o))),y=document.createElement("cite"),y.setAttribute("class","vjs-playlist-name"),y.appendChild(document.createTextNode(modalVideoItem.name)),m.appendChild(f),h.appendChild(m),h.appendChild(x),h.appendChild(y),I.append(h),h.addEventListener("click",i),h.addEventListener("tapone",i)}$("#videoModal #videoModalPlayerContainer").prepend('<video controls id="'+C.id+'"></video>'),$("#"+C.id).attr("data-account",C.account).attr("data-player",C.player).attr("data-embed",C.embed).addClass(C.class),bc(document.getElementById(C.id)),v=videojs(C.id),v.catalog.getVideo(this.getAttribute("data-video-id"),function(e,t){$(".vjs-poster").remove(),v.catalog.load(t),v.play()});var d=$(this).data("video-id");$(".vjs-playlist-item[data-video-id*="+d+"]").addClass("vjs-selected"),2==$(".vjs-playlist-item").length?($(w).remove(),$("#videoPlayerContainer").addClass("twoItems")):3==$(".vjs-playlist-item").length?($("#videoPlayerContainer").addClass("threeItems"),$(T).text($(".vjs-playlist-item").length+" Videos")):4==$(".vjs-playlist-item").length?($("#videoPlayerContainer").addClass("fourItems"),$(T).text($(".vjs-playlist-item").length+" Videos")):$(".vjs-playlist-item").length>4?($("#videoPlayerContainer").addClass("manyItems"),$(T).text($(".vjs-playlist-item").length+" Videos")):($("#videoModalPlaylistContainer").remove(),$("#videoModalPlaylistInfoContainer").remove()),v.ready(function(){this.ga()}),v.one("loadstart",function(){$(".vjs-big-play-button").remove(),$(".vjs-playlist-ad-overlay").remove(),I.bxSlider({minSlides:1,maxSlides:4,infiniteLoop:!1,slideMargin:10,slideWidth:260,moveSlides:1,nextSelector:"#slider-next",prevSelector:"#slider-prev",hideControlOnEnd:!0});var e=($(".vjs-playlist-thumbnail"),$(".vjs-playlist .vjs-playlist-item.vjs-selected .vjs-playlist-thumbnail"),$(".vjs-playlist-item"),$(".bx-next")),t=$(".bx-prev");e.html('<i class="icon-play"></i>'),t.html('<i class="icon-play"></i>')})}function s(e){var t=(parseInt(e%1e3/100),parseInt(e/1e3%60)),i=parseInt(e/6e4%60),n=parseInt(e/36e5%24);return n=10>n?"0"+n:n,i=10>i?"0"+i:i,t=10>t?"0"+t:t,1>n?i+":"+t:n+":"+i+":"+t}function a(){var e,t=b.getElementsByTagName("ul")[0].children;for(e=2;e<t.length;e++)t[e].style.display="block";$(this).remove()}var o,r,d,l,c,p,g,u,v,h,m,f,x,y,b=document.createElement("div"),S=document.createElement("ul"),C=(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,{id:"video-1",account:"1660622130",player:"SJJxTCbc",embed:"default","class":"video-js"}),I=$("ol.vjs-playlist"),w=$("#videoModalPlaylistInfoContainer"),T=$(".videoInfo");for(b.setAttribute("class","player-wrapper"),b.appendChild(S),r=t.videos.length,o=0;r>o;o++){u=t.videos[o],d=document.createElement("li"),d.setAttribute("class","playlist-item"),d.setAttribute("data-video-id",u.id),l=document.createElement("picture"),l.setAttribute("class","playlist-thumbnail"),playlistItemThumbnailImage=document.createElement("img"),playlistItemThumbnailImage.src=u.poster;var E=u.duration,P=E.toString(),M=P.replace(/\./g,""),k=parseInt(M,10);c=document.createElement("time"),c.setAttribute("class","playlist-duration"),c.appendChild(document.createTextNode(s(k))),p=document.createElement("cite"),p.setAttribute("class","playlist-name"),p.appendChild(document.createTextNode(u.name)),g=document.createElement("p"),g.setAttribute("class","playlist-description"),g.appendChild(document.createTextNode(u.description)),l.appendChild(playlistItemThumbnailImage),d.appendChild(l),d.appendChild(c),d.appendChild(p),S.appendChild(d),d.addEventListener("click",n),d.addEventListener("tapone",n)}if(r>3){var A=document.createElement("a");A.setAttribute("class","loadMore"),A.appendChild(document.createTextNode("Load More")),A.addEventListener("click",a),b.appendChild(A)}$(e).append(b),$(b).css({position:"relative"}).fadeIn("slow"),$(e).find(".placeholder").fadeOut("fast")})}function getTopicVideos(e){$.ajax({headers:{Accept:"application/json;pk="+policy_key},type:"GET",url:apiBaseURL+"/accounts/"+account_id+"/playlists/"+e,dataType:"json",crossDomain:!0,error:function(){"MSIE 9"==browserInfo&&($("#topicVideoComponent a#launchModal").remove(),$('<p class="upgrade">Please upgrade your browser for a better experience.</p>').insertAfter("#topicVideoComponent h6"),$('<a class="upgradeCTA" href="http://windows.microsoft.com/en-US/internet-explorer/download-ie" target="_blank">Upgrade Now</a>').insertAfter("#topicVideoComponent .upgrade"))}}).done(function(e){function t(){o.catalog.getVideo(this.getAttribute("data-video-id"),function(e,t){o.catalog.load(t),o.play()}),$(this).addClass("vjs-selected"),$(".vjs-playlist-item").not(this).removeClass("vjs-selected")}function i(){function i(e){var t=(parseInt(e%1e3/100),parseInt(e/1e3%60)),i=parseInt(e/6e4%60),n=parseInt(e/36e5%24);return n=10>n?"0"+n:n,i=10>i?"0"+i:i,t=10>t?"0"+t:t,1>n?i+":"+t:n+":"+i+":"+t}for($("#videoModal").addClass("showModal"),$("body").addClass("noScroll"),s=e.videos.length,j=0;s>j;j++){modalVideoItem=e.videos[j],r=document.createElement("li"),r.setAttribute("class","vjs-playlist-item"),r.setAttribute("data-video-id",modalVideoItem.id),d=document.createElement("picture"),d.setAttribute("class","vjs-playlist-thumbnail"),l=document.createElement("img"),l.src=modalVideoItem.poster;var n=modalVideoItem.duration,a=n.toString(),g=a.replace(/\./g,""),u=parseInt(g,10);c=document.createElement("time"),c.setAttribute("class","vjs-playlist-duration"),c.appendChild(document.createTextNode(i(u))),p=document.createElement("cite"),p.setAttribute("class","vjs-playlist-name"),p.appendChild(document.createTextNode(modalVideoItem.name)),d.appendChild(l),r.appendChild(d),r.appendChild(c),r.appendChild(p),x.append(r),r.addEventListener("click",t)}$("#videoModal #videoModalPlayerContainer").prepend('<video controls id="'+f.id+'"></video>'),$("#"+f.id).attr("data-account",f.account).attr("data-player",f.player).attr("data-embed",f.embed).addClass(f.class),bc(document.getElementById(f.id)),o=videojs(f.id),o.catalog.getVideo(this.getAttribute("data-video-id"),function(e,t){$(".vjs-poster").remove(),o.catalog.load(t),o.play()}),$(document).on("custom",function(){o.play()}),$(document).trigger("custom");var v=$(this).data("video-id");$(".vjs-playlist-item[data-video-id*="+v+"]").addClass("vjs-selected"),2==e.videos.length?($(y).remove(),$("#videoPlayerContainer").addClass("twoItems")):3==e.videos.length?($("#videoPlayerContainer").addClass("threeItems"),$(b).text($(".vjs-playlist-item").length+" Videos")):4==e.videos.length?($("#videoPlayerContainer").addClass("fourItems"),$(b).text($(".vjs-playlist-item").length+" Videos")):e.videos.length>4?($("#videoPlayerContainer").addClass("manyItems"),$(b).text($(".vjs-playlist-item").length+" Videos")):($("#videoModalPlaylistContainer").remove(),$("#videoModalPlaylistInfoContainer").remove()),o.ready(function(){this.ga()}),o.one("loadstart",function(){$(".vjs-playlist-ad-overlay, .vjs-big-play-button").remove(),x.bxSlider({minSlides:1,maxSlides:4,infiniteLoop:!1,slideMargin:10,slideWidth:260,moveSlides:1,nextSelector:"#slider-next",prevSelector:"#slider-prev",hideControlOnEnd:!0});var e=($(".vjs-playlist-thumbnail"),$(".vjs-playlist .vjs-playlist-item.vjs-selected .vjs-playlist-thumbnail"),$(".vjs-playlist-item"),$(".bx-next")),t=$(".bx-prev");e.html('<i class="icon-play"></i>'),t.html('<i class="icon-play"></i>')})}function n(e){var t=(parseInt(e%1e3/100),parseInt(e/1e3%60)),i=parseInt(e/6e4%60),n=parseInt(e/36e5%24);return n=10>n?"0"+n:n,i=10>i?"0"+i:i,t=10>t?"0"+t:t,1>n?i+":"+t:n+":"+i+":"+t}var s,a,o,r,d,l,c,p,g=$("a#launchModal").find("picture"),u=$("a#launchModal"),v=u.find("cite"),h=u.find("time"),m=$(".spinner"),f=(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,{id:"video-1",account:"1660622130",player:"SJJxTCbc",embed:"default","class":"video-js"}),x=$("ol.vjs-playlist"),y=$("#videoModalPlaylistInfoContainer"),b=$(".videoInfo");a=e.videos[0],topicPlaylistItemThumbnailImage=document.createElement("img"),topicPlaylistItemThumbnailImage.src=a.poster,g.append(topicPlaylistItemThumbnailImage),v.append(document.createTextNode(a.name)),u.attr("data-video-id",a.id);var S=a.duration,C=S.toString(),I=C.replace(/\./g,""),w=parseInt(I,10);h.append(document.createTextNode(n(w))),$("a#launchModal").on("click",i),m.remove()})}function singleFeaturedVideo(e){$.ajax({headers:{Accept:"application/json;pk="+policy_key},type:"GET",url:apiBaseURL+"/accounts/"+account_id+"/videos/"+e,dataType:"json",crossDomain:!0,error:function(){"MSIE 9"==browserInfo&&($("#featuredItems ul li a#launchModal").remove(),$('<a href="http://windows.microsoft.com/en-US/internet-explorer/download-ie" target="_blank"><div class="thumbnail"><img src="images/featuredItem2.jpg"><i class="icon-upgrade"></i></div><p>Please upgrade your browser for a better experience</p><span class="cta">Upgrade Now</span></a>').appendTo("#featuredItems ul li:nth-child(3)"))}}).done(function(t){function i(){$("#videoModal").addClass("showModal"),$("body").addClass("noScroll"),$("#videoModal #videoModalPlayerContainer").prepend('<video controls id="'+l.id+'"></video>'),$("#"+l.id).attr("data-account",l.account).attr("data-player",l.player).attr("data-embed",l.embed).addClass(l.class),bc(document.getElementById(l.id)),a=videojs(l.id),a.catalog.getVideo(e,function(e,t){$(".vjs-poster").remove(),a.catalog.load(t),a.play()}),$(document).on("custom",function(){a.play()}),$(document).trigger("custom"),a.ready(function(){this.ga()}),a.one("loadstart",function(){$(".vjs-playlist-ad-overlay, .vjs-big-play-button").remove()})}function n(e){var t=(parseInt(e%1e3/100),parseInt(e/1e3%60)),i=parseInt(e/6e4%60),n=parseInt(e/36e5%24);return n=10>n?"0"+n:n,i=10>i?"0"+i:i,t=10>t?"0"+t:t,1>n?i+":"+t:n+":"+i+":"+t}{var s,a,o=$("#featuredItems a#launchModal"),r=($("#featuredItems a#launchModal .thumbnail"),$("#featuredItems a#launchModal span.time")),d=$("#featuredItems a#launchModal p"),l=(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,{id:"video-1",account:"1660622130",player:"SJJxTCbc",embed:"default","class":"video-js"});$(".videoInfo")}s=t,d.prepend(document.createTextNode(s.name));var c=s.duration,p=c.toString(),g=p.replace(/\./g,""),u=parseInt(g,10);r.append(document.createTextNode(n(u))).css("display","block"),o.on("click",i)})}function singleLatestVideo(e){$.ajax({headers:{Accept:"application/json;pk="+policy_key},type:"GET",url:apiBaseURL+"/accounts/"+account_id+"/videos/"+e,dataType:"json",crossDomain:!0,error:function(){"MSIE 9"==browserInfo&&($("#latestVideo a#launchModal").remove(),$('<p class="upgrade">Please upgrade your browser for a better experience.</p>').insertAfter("#latestVideo h6"),$('<a class="upgradeCTA" href="http://windows.microsoft.com/en-US/internet-explorer/download-ie" target="_blank">Upgrade Now</a>').insertAfter("#latestVideo .upgrade"))}}).done(function(t){function i(){$("#videoModal").addClass("showModal"),$("body").addClass("noScroll"),$("#videoModal #videoModalPlayerContainer").prepend('<video controls id="'+p.id+'"></video>'),$("#"+p.id).attr("data-account",p.account).attr("data-player",p.player).attr("data-embed",p.embed).addClass(p.class),bc(document.getElementById(p.id)),o=videojs(p.id),o.catalog.getVideo(e,function(e,t){$(".vjs-poster").remove(),o.catalog.load(t),o.play()}),$(document).on("custom",function(){o.play()}),$(document).trigger("custom"),o.ready(function(){this.ga()}),o.one("loadstart",function(){$(".vjs-playlist-ad-overlay, .vjs-big-play-button").remove()})}function n(e){var t=(parseInt(e%1e3/100),parseInt(e/1e3%60)),i=parseInt(e/6e4%60),n=parseInt(e/36e5%24);return n=10>n?"0"+n:n,i=10>i?"0"+i:i,t=10>t?"0"+t:t,1>n?i+":"+t:n+":"+i+":"+t}{var s,a,o,r=$("#latestVideo a#launchModal"),d=$("#latestVideo a#launchModal picture"),l=$("#latestVideo a#launchModal time"),c=$("#latestVideo a#launchModal cite"),p=(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,{id:"video-1",account:"1660622130",player:"SJJxTCbc",embed:"default","class":"video-js"});$(".videoInfo")}s=t,c.prepend(document.createTextNode(s.name)),a=document.createElement("img"),a.src=s.poster,d.append(a);var g=s.duration,u=g.toString(),v=u.replace(/\./g,""),h=parseInt(v,10);l.append(document.createTextNode(n(h))),r.on("click",i)})}function featuredHeroVideo(e){$.ajax({headers:{Accept:"application/json;pk="+policy_key},type:"GET",url:apiBaseURL+"/accounts/"+account_id+"/videos/"+e,dataType:"json",crossDomain:!0,error:function(){"MSIE 9"==browserInfo&&($(".heroPrimaryContainer h1").text("We have detected that you are using "+getBrowserInfo()+". Please upgrade your browser for a better experience."),$(".heroPrimaryCTA").text("Upgrade Now"),$(".heroPrimaryTarget").attr({href:"http://windows.microsoft.com/en-US/internet-explorer/download-ie",target:"_blank"}))}}).done(function(t){function i(){$("#videoModal").addClass("showModal"),$("body").addClass("noScroll"),$("#videoModal #videoModalPlayerContainer").prepend('<video controls id="'+l.id+'"></video>'),$("#"+l.id).attr("data-account",l.account).attr("data-player",l.player).attr("data-embed",l.embed).addClass(l.class),bc(document.getElementById(l.id)),a=videojs(l.id),a.catalog.getVideo(e,function(e,t){$(".vjs-poster").remove(),a.catalog.load(t),a.play()}),$(document).on("custom",function(){a.play()}),$(document).trigger("custom"),a.ready(function(){this.ga()}),a.one("loadstart",function(){$(".vjs-playlist-ad-overlay, .vjs-big-play-button").remove()})}function n(e){var t=(parseInt(e%1e3/100),parseInt(e/1e3%60)),i=parseInt(e/6e4%60),n=parseInt(e/36e5%24);return n=10>n?"0"+n:n,i=10>i?"0"+i:i,t=10>t?"0"+t:t,1>n?i+":"+t:n+":"+i+":"+t}{var s,a,o=$(".heroPrimaryTarget"),r=$(".heroPrimaryTarget time"),d=$(".heroPrimaryTarget h1"),l=(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,{id:"video-1",account:"1660622130",player:"SJJxTCbc",embed:"default","class":"video-js"});$(".videoInfo")}s=t,d.prepend(document.createTextNode(s.name)),$(".heroPrimaryTarget h1").css("background","none");var c=s.duration,p=c.toString(),g=p.replace(/\./g,""),u=parseInt(g,10);r.append(document.createTextNode(n(u))).css("display","block"),$(".heroPrimaryTarget time").css("background","none"),o.on("click",i)})}var browserInfo=getBrowserInfo(),apiBaseURL="https://edge.api.brightcove.com/playback/v1",account_id="1660622130",policy_key="BCpkADawqM1O1SkJta2TNQzuPn2IvBXqzmiFZM7sHspVvArV5XSZMxMf5XJnkekrb50jdYOS9XDPYiywP9KarnzddUIPvZ_IQx36Frr8VEeaSUSdeUVyM5qm7hA";!function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};e.fn.bxSlider=function(s){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(s)}),this;var a={},o=this;t.el=this;var r=e(window).width(),d=e(window).height(),l=function(){a.settings=e.extend({},n,s),a.settings.slideWidth=parseInt(a.settings.slideWidth),a.children=o.children(a.settings.slideSelector),a.children.length<a.settings.minSlides&&(a.settings.minSlides=a.children.length),a.children.length<a.settings.maxSlides&&(a.settings.maxSlides=a.children.length),a.settings.randomStart&&(a.settings.startSlide=Math.floor(Math.random()*a.children.length)),a.active={index:a.settings.startSlide},a.carousel=a.settings.minSlides>1||a.settings.maxSlides>1,a.carousel&&(a.settings.preloadImages="all"),a.minThreshold=a.settings.minSlides*a.settings.slideWidth+(a.settings.minSlides-1)*a.settings.slideMargin,a.maxThreshold=a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin,a.working=!1,a.controls={},a.interval=null,a.animProp="vertical"==a.settings.mode?"top":"left",a.usingCSS=a.settings.useCSS&&"fade"!=a.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return a.cssPrefix=t[i].replace("Perspective","").toLowerCase(),a.animProp="-"+a.cssPrefix+"-transform",!0;return!1}(),"vertical"==a.settings.mode&&(a.settings.maxSlides=a.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(a.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),c()},c=function(){o.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),a.viewport=o.parent(),a.loader=e('<div class="bx-loading" />'),a.viewport.prepend(a.loader),o.css({width:"horizontal"==a.settings.mode?100*a.children.length+215+"%":"auto",position:"relative"}),a.usingCSS&&a.settings.easing?o.css("-"+a.cssPrefix+"-transition-timing-function",a.settings.easing):a.settings.easing||(a.settings.easing="swing"),m(),a.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),a.viewport.parent().css({maxWidth:v()}),a.settings.pager||a.viewport.parent().css({margin:"0 auto 0px"}),a.children.css({"float":"horizontal"==a.settings.mode?"left":"none",listStyle:"none",position:"relative"}),a.children.css("width",h()),"horizontal"==a.settings.mode&&a.settings.slideMargin>0&&a.children.css("marginRight",a.settings.slideMargin),"vertical"==a.settings.mode&&a.settings.slideMargin>0&&a.children.css("marginBottom",a.settings.slideMargin),"fade"==a.settings.mode&&(a.children.css({position:"absolute",zIndex:0,display:"none"}),a.children.eq(a.settings.startSlide).css({zIndex:a.settings.slideZIndex,display:"block"})),a.controls.el=e('<div class="bx-controls" />'),a.settings.captions&&w(),a.active.last=a.settings.startSlide==f()-1,a.settings.video&&o.fitVids();var t=a.children.eq(a.settings.startSlide);"all"==a.settings.preloadImages&&(t=a.children),a.settings.ticker?a.settings.pager=!1:(a.settings.pager&&C(),a.settings.controls&&$(),a.settings.auto&&a.settings.autoControls&&I(),(a.settings.controls||a.settings.autoControls||a.settings.pager)&&a.viewport.after(a.controls.el)),p(t,g)},p=function(t,i){var n=t.find("img, iframe").length;if(0==n)return i(),void 0;var s=0;t.find("img, iframe").each(function(){e(this).one("load",function(){++s==n&&i()}).each(function(){this.complete&&e(this).load()})})},g=function(){if(a.settings.infiniteLoop&&"fade"!=a.settings.mode&&!a.settings.ticker){var t="vertical"==a.settings.mode?a.settings.minSlides:a.settings.maxSlides,i=a.children.slice(0,t).clone().addClass("bx-clone"),n=a.children.slice(-t).clone().addClass("bx-clone");o.append(i).prepend(n)}a.loader.remove(),y(),"vertical"==a.settings.mode&&(a.settings.adaptiveHeight=!0),a.viewport.height(u()),o.redrawSlider(),a.settings.onSliderLoad(a.active.index),a.initialized=!0,a.settings.responsive&&e(window).bind("resize",U),a.settings.auto&&a.settings.autoStart&&N(),a.settings.ticker&&L(),a.settings.pager&&k(a.settings.startSlide),a.settings.controls&&z(),a.settings.touchEnabled&&!a.settings.ticker&&D()},u=function(){var t=0,n=e();if("vertical"==a.settings.mode||a.settings.adaptiveHeight)if(a.carousel){var s=1==a.settings.moveSlides?a.active.index:a.active.index*x();for(n=a.children.eq(s),i=1;i<=a.settings.maxSlides-1;i++)n=s+i>=a.children.length?n.add(a.children.eq(i-1)):n.add(a.children.eq(s+i))}else n=a.children.eq(a.active.index);else n=a.children;return"vertical"==a.settings.mode?(n.each(function(){t+=e(this).outerHeight()}),a.settings.slideMargin>0&&(t+=a.settings.slideMargin*(a.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),t},v=function(){var e="100%";return a.settings.slideWidth>0&&(e="horizontal"==a.settings.mode?a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin:a.settings.slideWidth),e},h=function(){var e=a.settings.slideWidth,t=a.viewport.width();return 0==a.settings.slideWidth||a.settings.slideWidth>t&&!a.carousel||"vertical"==a.settings.mode?e=t:a.settings.maxSlides>1&&"horizontal"==a.settings.mode&&(t>a.maxThreshold||t<a.minThreshold&&(e=(t-a.settings.slideMargin*(a.settings.minSlides-1))/a.settings.minSlides)),e},m=function(){var e=1;if("horizontal"==a.settings.mode&&a.settings.slideWidth>0)if(a.viewport.width()<a.minThreshold)e=a.settings.minSlides;else if(a.viewport.width()>a.maxThreshold)e=a.settings.maxSlides;else{var t=a.children.first().width();e=Math.floor(a.viewport.width()/t)}else"vertical"==a.settings.mode&&(e=a.settings.minSlides);return e},f=function(){var e=0;if(a.settings.moveSlides>0)if(a.settings.infiniteLoop)e=a.children.length/x();else for(var t=0,i=0;t<a.children.length;)++e,t=i+m(),i+=a.settings.moveSlides<=m()?a.settings.moveSlides:m();else e=Math.ceil(a.children.length/m());return e},x=function(){return a.settings.moveSlides>0&&a.settings.moveSlides<=m()?a.settings.moveSlides:m()},y=function(){if(a.children.length>a.settings.maxSlides&&a.active.last&&!a.settings.infiniteLoop){if("horizontal"==a.settings.mode){var e=a.children.last(),t=e.position();b(-(t.left-(a.viewport.width()-e.width())),"reset",0)}else if("vertical"==a.settings.mode){var i=a.children.length-a.settings.minSlides,t=a.children.eq(i).position();b(-t.top,"reset",0)}}else{var t=a.children.eq(a.active.index*x()).position();a.active.index==f()-1&&(a.active.last=!0),void 0!=t&&("horizontal"==a.settings.mode?b(-t.left,"reset",0):"vertical"==a.settings.mode&&b(-t.top,"reset",0))}},b=function(e,t,i,n){if(a.usingCSS){var s="vertical"==a.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";o.css("-"+a.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(o.css(a.animProp,s),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),A()})):"reset"==t?o.css(a.animProp,s):"ticker"==t&&(o.css("-"+a.cssPrefix+"-transition-timing-function","linear"),o.css(a.animProp,s),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(n.resetValue,"reset",0),q()}))}else{var r={};r[a.animProp]=e,"slide"==t?o.animate(r,i,a.settings.easing,function(){A()}):"reset"==t?o.css(a.animProp,e):"ticker"==t&&o.animate(r,speed,"linear",function(){b(n.resetValue,"reset",0),q()})}},S=function(){for(var t="",i=f(),n=0;i>n;n++){var s="";a.settings.buildPager&&e.isFunction(a.settings.buildPager)?(s=a.settings.buildPager(n),a.pagerEl.addClass("bx-custom-pager")):(s=n+1,a.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+n+'" class="bx-pager-link">'+s+"</a></div>"}a.pagerEl.html(t)},C=function(){a.settings.pagerCustom?a.pagerEl=e(a.settings.pagerCustom):(a.pagerEl=e('<div class="bx-pager" />'),a.settings.pagerSelector?e(a.settings.pagerSelector).html(a.pagerEl):a.controls.el.addClass("bx-has-pager").append(a.pagerEl),S()),a.pagerEl.on("click","a",M)},$=function(){a.controls.next=e('<a class="bx-next" href="">'+a.settings.nextText+"</a>"),a.controls.prev=e('<a class="bx-prev" href="">'+a.settings.prevText+"</a>"),a.controls.next.bind("click",T),a.controls.prev.bind("click",E),a.settings.nextSelector&&e(a.settings.nextSelector).append(a.controls.next),a.settings.prevSelector&&e(a.settings.prevSelector).append(a.controls.prev),a.settings.nextSelector||a.settings.prevSelector||(a.controls.directionEl=e('<div class="bx-controls-direction" />'),a.controls.directionEl.append(a.controls.prev).append(a.controls.next),a.controls.el.addClass("bx-has-controls-direction").append(a.controls.directionEl))},I=function(){a.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+a.settings.startText+"</a></div>"),a.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+a.settings.stopText+"</a></div>"),a.controls.autoEl=e('<div class="bx-controls-auto" />'),a.controls.autoEl.on("click",".bx-start",j),a.controls.autoEl.on("click",".bx-stop",P),a.settings.autoControlsCombine?a.controls.autoEl.append(a.controls.start):a.controls.autoEl.append(a.controls.start).append(a.controls.stop),a.settings.autoControlsSelector?e(a.settings.autoControlsSelector).html(a.controls.autoEl):a.controls.el.addClass("bx-has-controls-auto").append(a.controls.autoEl),V(a.settings.autoStart?"stop":"start")},w=function(){a.children.each(function(){var t=e(this).find("img:first").attr("title");void 0!=t&&(""+t).length&&e(this).append('<div class="bx-caption"><span>'+t+"</span></div>")})},T=function(e){a.settings.auto&&o.stopAuto(),o.goToNextSlide(),e.preventDefault()},E=function(e){a.settings.auto&&o.stopAuto(),o.goToPrevSlide(),e.preventDefault()},j=function(e){o.startAuto(),e.preventDefault()},P=function(e){o.stopAuto(),e.preventDefault()},M=function(t){a.settings.auto&&o.stopAuto();var i=e(t.currentTarget),n=parseInt(i.attr("data-slide-index"));n!=a.active.index&&o.goToSlide(n),t.preventDefault()},k=function(t){var i=a.children.length;return"short"==a.settings.pagerType?(a.settings.maxSlides>1&&(i=Math.ceil(a.children.length/a.settings.maxSlides)),a.pagerEl.html(t+1+a.settings.pagerShortSeparator+i),void 0):(a.pagerEl.find("a").removeClass("active"),a.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}),void 0)},A=function(){if(a.settings.infiniteLoop){var e="";0==a.active.index?e=a.children.eq(0).position():a.active.index==f()-1&&a.carousel?e=a.children.eq((f()-1)*x()).position():a.active.index==a.children.length-1&&(e=a.children.eq(a.children.length-1).position()),e&&("horizontal"==a.settings.mode?b(-e.left,"reset",0):"vertical"==a.settings.mode&&b(-e.top,"reset",0))}a.working=!1,a.settings.onSlideAfter(a.children.eq(a.active.index),a.oldIndex,a.active.index)},V=function(e){a.settings.autoControlsCombine?a.controls.autoEl.html(a.controls[e]):(a.controls.autoEl.find("a").removeClass("active"),a.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},z=function(){1==f()?(a.controls.prev.addClass("disabled"),a.controls.next.addClass("disabled")):!a.settings.infiniteLoop&&a.settings.hideControlOnEnd&&(0==a.active.index?(a.controls.prev.addClass("disabled"),a.controls.next.removeClass("disabled")):a.active.index==f()-1?(a.controls.next.addClass("disabled"),a.controls.prev.removeClass("disabled")):(a.controls.prev.removeClass("disabled"),a.controls.next.removeClass("disabled")))},N=function(){a.settings.autoDelay>0?setTimeout(o.startAuto,a.settings.autoDelay):o.startAuto(),a.settings.autoHover&&o.hover(function(){a.interval&&(o.stopAuto(!0),a.autoPaused=!0)},function(){a.autoPaused&&(o.startAuto(!0),a.autoPaused=null)})},L=function(){var t=0;if("next"==a.settings.autoDirection)o.append(a.children.clone().addClass("bx-clone"));else{o.prepend(a.children.clone().addClass("bx-clone"));var i=a.children.first().position();t="horizontal"==a.settings.mode?-i.left:-i.top}b(t,"reset",0),a.settings.pager=!1,a.settings.controls=!1,a.settings.autoControls=!1,a.settings.tickerHover&&!a.usingCSS&&a.viewport.hover(function(){o.stop()},function(){var t=0;a.children.each(function(){t+="horizontal"==a.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var i=a.settings.speed/t,n="horizontal"==a.settings.mode?"left":"top",s=i*(t-Math.abs(parseInt(o.css(n))));q(s)}),q()},q=function(e){speed=e?e:a.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==a.settings.autoDirection?t=o.find(".bx-clone").first().position():i=a.children.first().position();var n="horizontal"==a.settings.mode?-t.left:-t.top,s="horizontal"==a.settings.mode?-i.left:-i.top,r={resetValue:s};b(n,"ticker",speed,r)},D=function(){a.touch={start:{x:0,y:0},end:{x:0,y:0}},a.viewport.bind("touchstart",B)},B=function(e){if(a.working)e.preventDefault();else{a.touch.originalPos=o.position();var t=e.originalEvent;a.touch.start.x=t.changedTouches[0].pageX,a.touch.start.y=t.changedTouches[0].pageY,a.viewport.bind("touchmove",W),a.viewport.bind("touchend",H)}},W=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-a.touch.start.x),n=Math.abs(t.changedTouches[0].pageY-a.touch.start.y);if(3*i>n&&a.settings.preventDefaultSwipeX?e.preventDefault():3*n>i&&a.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=a.settings.mode&&a.settings.oneToOneTouch){var s=0;if("horizontal"==a.settings.mode){var o=t.changedTouches[0].pageX-a.touch.start.x;s=a.touch.originalPos.left+o}else{var o=t.changedTouches[0].pageY-a.touch.start.y;s=a.touch.originalPos.top+o}b(s,"reset",0)}},H=function(e){a.viewport.unbind("touchmove",W);var t=e.originalEvent,i=0;if(a.touch.end.x=t.changedTouches[0].pageX,a.touch.end.y=t.changedTouches[0].pageY,"fade"==a.settings.mode){var n=Math.abs(a.touch.start.x-a.touch.end.x);n>=a.settings.swipeThreshold&&(a.touch.start.x>a.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())}else{var n=0;"horizontal"==a.settings.mode?(n=a.touch.end.x-a.touch.start.x,i=a.touch.originalPos.left):(n=a.touch.end.y-a.touch.start.y,i=a.touch.originalPos.top),!a.settings.infiniteLoop&&(0==a.active.index&&n>0||a.active.last&&0>n)?b(i,"reset",200):Math.abs(n)>=a.settings.swipeThreshold?(0>n?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):b(i,"reset",200)}a.viewport.unbind("touchend",H)},U=function(){var t=e(window).width(),i=e(window).height();(r!=t||d!=i)&&(r=t,d=i,o.redrawSlider(),a.settings.onSliderResize.call(o,a.active.index))};return o.goToSlide=function(t,i){if(!a.working&&a.active.index!=t)if(a.working=!0,a.oldIndex=a.active.index,a.active.index=0>t?f()-1:t>=f()?0:t,a.settings.onSlideBefore(a.children.eq(a.active.index),a.oldIndex,a.active.index),"next"==i?a.settings.onSlideNext(a.children.eq(a.active.index),a.oldIndex,a.active.index):"prev"==i&&a.settings.onSlidePrev(a.children.eq(a.active.index),a.oldIndex,a.active.index),a.active.last=a.active.index>=f()-1,a.settings.pager&&k(a.active.index),a.settings.controls&&z(),"fade"==a.settings.mode)a.settings.adaptiveHeight&&a.viewport.height()!=u()&&a.viewport.animate({height:u()},a.settings.adaptiveHeightSpeed),a.children.filter(":visible").fadeOut(a.settings.speed).css({zIndex:0}),a.children.eq(a.active.index).css("zIndex",a.settings.slideZIndex+1).fadeIn(a.settings.speed,function(){e(this).css("zIndex",a.settings.slideZIndex),A()
});else{a.settings.adaptiveHeight&&a.viewport.height()!=u()&&a.viewport.animate({height:u()},a.settings.adaptiveHeightSpeed);var n=0,s={left:0,top:0};if(!a.settings.infiniteLoop&&a.carousel&&a.active.last)if("horizontal"==a.settings.mode){var r=a.children.eq(a.children.length-1);s=r.position(),n=a.viewport.width()-r.outerWidth()}else{var d=a.children.length-a.settings.minSlides;s=a.children.eq(d).position()}else if(a.carousel&&a.active.last&&"prev"==i){var l=1==a.settings.moveSlides?a.settings.maxSlides-x():(f()-1)*x()-(a.children.length-a.settings.maxSlides),r=o.children(".bx-clone").eq(l);s=r.position()}else if("next"==i&&0==a.active.index)s=o.find("> .bx-clone").eq(a.settings.maxSlides).position(),a.active.last=!1;else if(t>=0){var c=t*x();s=a.children.eq(c).position()}if("undefined"!=typeof s){var p="horizontal"==a.settings.mode?-(s.left-n):-s.top;b(p,"slide",a.settings.speed)}}},o.goToNextSlide=function(){if(a.settings.infiniteLoop||!a.active.last){var e=parseInt(a.active.index)+1;o.goToSlide(e,"next")}},o.goToPrevSlide=function(){if(a.settings.infiniteLoop||0!=a.active.index){var e=parseInt(a.active.index)-1;o.goToSlide(e,"prev")}},o.startAuto=function(e){a.interval||(a.interval=setInterval(function(){"next"==a.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},a.settings.pause),a.settings.autoControls&&1!=e&&V("stop"))},o.stopAuto=function(e){a.interval&&(clearInterval(a.interval),a.interval=null,a.settings.autoControls&&1!=e&&V("start"))},o.getCurrentSlide=function(){return a.active.index},o.getCurrentSlideElement=function(){return a.children.eq(a.active.index)},o.getSlideCount=function(){return a.children.length},o.redrawSlider=function(){a.children.add(o.find(".bx-clone")).outerWidth(h()),a.viewport.css("height",u()),a.settings.ticker||y(),a.active.last&&(a.active.index=f()-1),a.active.index>=f()&&(a.active.last=!0),a.settings.pager&&!a.settings.pagerCustom&&(S(),k(a.active.index))},o.destroySlider=function(){a.initialized&&(a.initialized=!1,e(".bx-clone",this).remove(),a.children.each(function(){void 0!=e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),void 0!=e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),a.controls.el&&a.controls.el.remove(),a.controls.next&&a.controls.next.remove(),a.controls.prev&&a.controls.prev.remove(),a.pagerEl&&a.settings.controls&&a.pagerEl.remove(),e(".bx-caption",this).remove(),a.controls.autoEl&&a.controls.autoEl.remove(),clearInterval(a.interval),a.settings.responsive&&e(window).unbind("resize",U))},o.reloadSlider=function(e){void 0!=e&&(s=e),o.destroySlider(),l()},l(),this}}(jQuery);