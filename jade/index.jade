doctype html
html(lang='en', dir='ltr')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title TechTarget
    //if lte IE 7
      script(src='http://cdn.ttgtmedia.com/microsites/ttgtShell/js/libs/icomoon_ie7.js')
    script(type='text/javascript', src='http://fast.fonts.net/jsapi/124d48dd-e515-4302-8bfb-1d5c1e3da916.js')
    link(rel='stylesheet', href='http://cdn.ttgtmedia.com/microsites/ttgtShell/css/libs/normalize.css')
    link(rel='stylesheet', href='http://cdn.ttgtmedia.com/microsites/ttgtShell/css/libs/icomoon.css')
    link(rel='stylesheet', href='http://cdn.ttgtmedia.com/microsites/ttgtShell/css/libs/jquery.jscrollpane.css')
    link(rel='stylesheet', href='http://cdn.ttgtmedia.com/microsites/ttgtShell/css/libs/jquery-ui-1.10.3.custom.min.css')
    link(rel='stylesheet', href='http://cdn.ttgtmedia.com/microsites/ttgtShell/css/libs/responsive-carousel.css')
    link(rel='stylesheet', href='http://cdn.ttgtmedia.com/microsites/ttgtShell/css/libs/responsive-carousel.slide.css')
    link(rel='stylesheet', href='http://media.eng.ttgtmedia.com/rms/ux/responsive/css/main.css?v=6.32-SNAPSHOT')
    //if lte IE 7
      link(rel='stylesheet', href='http://cdn.ttgtmedia.com/microsites/ttgtShell/css/ie7.css')
    //if IE 8
      link(rel='stylesheet', href='http://cdn.ttgtmedia.com/microsites/ttgtShell/css/ie8.css')
    script(src='http://cdn.ttgtmedia.com/microsites/ttgtShell/js/libs/respond.min.js', type='text/javascript')
    script(type='text/javascript', src='http://cdn.ttgtmedia.com/microsites/ttgtShell/js/libs/modernizr.custom.50545.js')
    script(src='http://cdn.ttgtmedia.com/microsites/ttgtShell/js/libs/jquery-1.10.1.min.js')
    link(rel='shortcut icon', type='image/x-icon', href='/favicon.ico')
    link(rel='apple-touch-icon', sizes='144×144', href='/apple-touch-icon-144x144.png')
    link(rel='apple-touch-icon', sizes='114×114', href='/apple-touch-icon-114x114.png')
    link(rel='apple-touch-icon', sizes='72×72', href='/apple-touch-icon-72x72.png')
    link(rel='apple-touch-icon', href='/apple-touch-icon-precomposed.png')
    link(rel='apple-touch-icon-precomposed', sizes='144×144', href='/apple-touch-icon-144x144-precomposed.png')
    link(rel='apple-touch-icon-precomposed', sizes='114×114', href='/apple-touch-icon-114x114-precomposed.png')
    link(rel='apple-touch-icon-precomposed', sizes='72×72', href='/apple-touch-icon-72x72-precomposed.png')
    link(rel='apple-touch-icon-precomposed', href='/apple-touch-icon-precomposed.png')
    link(rel='stylesheet', href='css/style-responsive.css', type='text/css', media='screen')
    link(id="sheet1", rel='stylesheet', href='php/css.php', type='text/css', media='screen')
    script(src='//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js')
    // Begin Google Tag Manager
    noscript
      iframe(src='//www.googletagmanager.com/ns.html?id=GTM-PWWZSH', height='0', width='0', style='display:none;visibility:hidden')
    script.
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PWWZSH');
    noscript
      iframe(src='//www.googletagmanager.com/ns.html?id=GTM-5CSF7N', height='0', width='0', style='display:none;visibility:hidden')
    script.
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5CSF7N');
    // End Google Tag Manager
    script(src='javascript/jgestures.min.js')
    script(src='javascript/script-responsive.js')
    script(src='javascript/video.js')
    script(src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.js")
    script(type="text/javascript" src="javascript/jspdf.min.js")
    script(type="text/javascript" src="javascript/html2canvas.js")
    link(rel="stylesheet", type="text/css", href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.css")
    style.
      #editWindow {
        background: #f5f5f5;
        border-right:1px solid #e2e2e2;
        /*bottom: -10%;
        border-radius: 5px 5px  0 0;*/
        color: #9b9a9a;
        display: block;
        font-family: Helvetica, Arial, Sans-serif;
        font: 15px/1.8 Helvetica, Arial, Sans-serif;
        font-weight: 200;
        height: auto;
        /*left: 50%;*/
        margin-left: -300px;
        position: fixed;
        top: 0;
        width: 300px;
        z-index: 9999;
      }
      #editWindow .demo-settings {
        padding:20px;
        border-top: 1px solid #e5e5e5;
      }
      #editWindow .demo-settings-title {
        text-transform: uppercase;
        font-size: 10px;
        color: #a6a5a5;
      }
      #editWindow .demo-header {
        background: #00b3ac;
        padding: 20px;
        height: 90px;
        color: #fff;
      }
      #editWindow .demo-header img {
        height: 50px;
        padding-right: 20px;
        border-right: 1px solid #66d1cd;
        float: left;
      }
      #editWindow .demo-header-title {
        color: #fff;
        line-height: 1.2em;
        font-weight: 200;
        margin-left: 135px;
        margin-top: 7px
      }

      #editWindow .demo-footer button {
        border: none;
      }
      #editWindow .demo-footer button.demo-generate-pdf {
        border-left: 1px solid #e5e5e5;
        float: right;
        text-transform: uppercase;
        padding: 10px;
        color: #d0d0d0;
        font-weight: 600;
        font-size: 12px;
        background: none;
        right:0;
      }

      #editWindow .demo-footer button.demo-generate-pdf:hover {
        color: #666;
      }
      #editWindow .demo-footer {
        border-top: 1px solid #e5e5e5;
        bottom: 0;
        position: absolute;
        display: block;
        width: 100%;
      }
      #editWindow > div > p {
        color: #9b9a9a;
        font-weight: 200;
        margin-bottom: 10px;
      }
      #editWindow input,
      #editWindow select {
        font-size: 16px;
        padding: 7px;
        margin-bottom: 15px;
        color: #636262;
        font-family: Helvetica, Arial, Sans-serif;
        width: 260px;
      }
      #editWindow .c1,
      #editWindow .c2 {
        padding-bottom: 15px;
      }
      #editWindow p,
      #editWindow li {
        color: #9b9a9a;
        font-weight: 200;
        font-family: Helvetica, Arial, Sans-serif;
      }
      #editWindow.open { top:0;margin-left:0;}
      #editWindow .pull {border:none;z-index:2;}
      #editWindow .pull p:after{position: relative;top: 11px;font-weight:600;font-size:20px;content: '+'}
      #editWindow.open .pull {left:0px;background: none;border-right: 1px solid #e5e5e5;}
      #editWindow.open .pull p:after {color:#d0d0d0;font-weight:600;font-size:20px;content: '-'}
      #editWindow.open .pull p:hover::after {
        color: #666;
      }
      #editWindow,
      #micrositeWrapper {
        -webkit-transition: all 0.3s ease;
        -moz-transition: all 0.3s ease;
        transition: all 0.3s ease;
      }

      #micrositeWrapper {
        position: relative;
        left:0;
      }

      body style, body > #micrositeWrapper > #editWindow > script {
        display: block;
        overflow-x: scroll;
        white-space: pre;
      }
      body {position: relative;}
      .pull {
        background: #333;
        color: #fff;
        cursor: pointer;
        display: block;
        float: none;
        font-size: 20px;
        line-height: 1;
        position: fixed;
        text-align: center;
        bottom: 0;
        left: 0;
        width: 40px !important;
        height:38px;
      }
      .pull p {margin: 0 !important;}
      #homepage #additionalResources {
        display: none;
      }
      .sp-replacer {
        border-color: #e2e2e2;
        background: #fff;
        margin-left: 10px;
      }
      .sp-replacer:hover {
        border-color: #999;
      }
      .sp-replacer:hover > .sp-dd {
        color: #999;
      }
      .sp-preview {
        border-color: #e2e2e2;
      }
      .sp-dd {
        color: #b3b3b3;
      }

body
    #editWindow
      .pull
        p
      div.demo-header
        img(src="http://cdn.ttgtmedia.com/rms/ux/responsive/img/nav_logo@2x.png" alt="TechTarget")
        p.demo-header-title Templated Sites Demo
      div.demo-settings
        //- p.demo-settings-title Settings
        input#changeTitle(placeholder="Site Title")
        p Select Layout
          select#layoutChoice
            option(value="A", selected="selected") A: Additional Downloads
            option(value="B") B: Latest Resources
        .c1
          label(for="html5colorpicker-color1") Color 1
          input.c1(name="html5colorpicker-color1" type="color", id="html5colorpicker-color1", style="width:100%;")
        .c2
          label(for="html5colorpicker-color2") Color 2
          input.c2(name="html5colorpicker-color2" type="color", id="html5colorpicker-color2", style="width:100%;")
      div.demo-footer
        button.demo-generate-pdf(onclick="javascript:generatePDF();") PDF
    script(contenteditable).
      $('.pull').on('click', function() {
        $('#editWindow').toggleClass('open');
      });
      $(".c1, .c2").spectrum({
          allowEmpty:true,
          color: "#ECC",
          showInput: true,
          containerClassName: "full-spectrum",
          showInitial: true,
          showPalette: true,
          showSelectionPalette: true,
          //- showAlpha: true,
          maxPaletteSize: 10,
          preferredFormat: "hex",
          localStorageKey: "spectrum.demo"
      });
      
      $('#changeTitle').on('input',function() {
        $('.siteTitle').text($(this).val());
        if ($(this).val() == '') {
          $('.siteTitle').text('Productivity and Collaboration');  
        }
      });
      $('#layoutChoice').on('change', function() {
        if ($('#layoutChoice option:selected').val() == 'A') {
          $('#homepage #additionalResources').css('display','none');
          $('#homepage #additionalDownloads, #resources').css('display','block');
        } else {
          $('#homepage #additionalDownloads, #resources').css('display','none');
          $('#homepage #additionalResources').css('display','block');
        }
      });

    script(generatePDF).
      function generatePDF() {
        $('#editWindow').hide();
        html2canvas($("body"), {
          onrendered: function (canvas) {
            var imgData = canvas.toDataURL('image/jpg');
            var imgWidth = 210;
            var pageHeight = 295;
            var imgHeight = canvas.height * imgWidth / canvas.width;
            var heightLeft = imgHeight;

            var doc = new jsPDF('p', 'mm');
            var position = 0;

            doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
            heightLeft -= pageHeight;

            while (heightLeft >= 0) {
              position = heightLeft - imgHeight;
              doc.addPage();
              doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
              heightLeft -= pageHeight;
            }
            doc.save('TechTarget-StandAloneSite.pdf')
            $('#editWindow').show();
          }
        });
      }
    #micrositeWrapper
      include pageSections/header
      include pageSections/navigation
      include pageSections/homeContent
      include pageSections/resourcesSection
      #videoModal
        #videoModalPlayerContainer
      include pageSections/footer
    script(src="javascript/jquery.menu-aim.js")
    script(src="//players.brightcove.net/1660622130/SJJxTCbc_default/index.min.js")
    script(src="http://cdn.ttgtmedia.com/rms/ux/javascript/microsite/videojs.ga.videocloud.js")
